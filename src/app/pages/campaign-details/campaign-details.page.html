<section class="campain-details">
  <section class="hero">
    <ul class="sub-heading">
      <li [routerLink]="['/campaigns']">Campaigns</li>
      <li>Campaign Details</li>
    </ul>
    <h1 class="heading">{{ name() }}</h1>
  </section>

  <section class="content">
    <div class="content__image image">
      @if (isLoading() && !removeLoader()) {
      <div class="loading-spinner">
        <mat-progress-spinner
          mode="indeterminate"
          diameter="40"
          strokeWidth="5"
          data-spinner
        >
        </mat-progress-spinner>
      </div>
      }
      <img
        appImageFallback
        [imageSrc]="image()"
        [src]="image()"
        (load)="hideSpinner()"
        (error)="hideSpinner()"
        [alt]="name()"
        [class.hidden]="isLoading() && !removeLoader()"
      />
    </div>
    <div class="content-data">
      <p>Weâ€™ve helped hundreds of users raise funds</p>
      <h2>Contribute to Make a Real Difference</h2>
      <app-progress-bar
        [percentage]="percentage()"
        class="progress-bar"
      />
      <ul class="content-grid">
        <li>
            <h1>${{ goal() | number:'1.0-0' }}</h1>
            <p>Campaign Target</p>
        </li>
        <li>
            <h1>{{ percentage() }}%</h1>
            <p>Campaign Target Achieved</p>
        </li>
        <li>
            <h1>${{ currentAmount() | number:'1.0-0' }}</h1>
            <p>Raised Funds</p>
        </li>
        <li>
            <h1>{{ donors().length }}+</h1>
            <p>Donors</p>
        </li>
      </ul>
    </div>
  </section>

  @if (donors().length > 0) {
    <section class="donors">
      <h3>Champions of the Cause</h3>
      <ul class="donors-grid">
        @for (donor of donors(); track donor.name) {
          <li>
              <h4>{{ donor.name }}</h4>
              <div class="amount">
                  <img src="assets/images/icons/dollar.svg" alt="dollar-icon" class="icon">
                  <p>{{ donor.amount | number:'1.0-0' }}</p>
              </div>
          </li>
        }
      </ul>
    </section>
  }

  <form class="donate" (ngSubmit)="onSubmit()" #donationForm="ngForm">
    <h3>Donate Now</h3>
    <div>
        <input 
          customInput 
          type="number" 
          placeholder="$10.00"
          [ngModel]="donationAmount()"
          (ngModelChange)="donationAmount.set($event)"
          name="amount"
          min="1"
          step="0.01"
          required
        >
        <input 
          customInput 
          type="text" 
          placeholder="Enter your name"
          [ngModel]="donorName()"
          (ngModelChange)="donorName.set($event)"
          name="donorName"
          required
        >
        <button 
          customButton 
          type="submit"
          [disabled]="isSubmitting() || !donationForm.valid"
        >
          @if (isSubmitting()) {
            <mat-progress-spinner
              mode="indeterminate"
              diameter="20"
              strokeWidth="3"
            >
            </mat-progress-spinner>
          } @else {
            Donate
          }
        </button>
    </div>
  </form>

  <section class="social-proof">
    <p>Our partners help drive the success of your campaigns</p>
    <ul class="logos">
        <li>
            <img src="assets/images/partners/layers.svg" alt="" class="logo">
        </li>
        <li>
            <img src="assets/images/partners/sisyphus.svg" alt="" class="logo">
        </li>
        <li>
            <img src="assets/images/partners/circooles.svg" alt="" class="logo">
        </li>
        <li>
            <img src="assets/images/partners/catalog.svg" alt="" class="logo">
        </li>
        <li>
            <img src="assets/images/partners/quotient.svg" alt="" class="logo">
        </li>
    </ul>
  </section>
</section>
